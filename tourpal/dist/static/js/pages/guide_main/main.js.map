{"version":3,"sources":["webpack:///./src/pages/guide_main/main.js","webpack:///src/pages/guide_main/index.vue","webpack:///./src/pages/guide_main/index.vue?2ea1","webpack:///./src/assets/style/d-btn.css?73f4","webpack:///./src/assets/style/d-head.css?25c5","webpack:///./src/assets/style/d-search-list.css?2b86","webpack:///./src/pages/guide_main/index.vue?9447","webpack:///./src/pages/guide_main/index.vue"],"names":["app","Vue","App","$mount","config","navigationBarTitleText","navigationBarTextStyle","navigationBarBackgroundColor"],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA,IAAMA,MAAM,IAAIC,2CAAJ,CAAQC,uDAAR,CAAZ;AACAF,IAAIG,MAAJ;;AAEe;AACXC,YAAQ;AACJC,gCAAwB,MADpB;AAEJC,gCAAwB,OAFpB;AAGJC,sCAA8B;AAH1B;AADG,CAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AADA,GADA;AAIA,MAJA,kBAIA;AACA;AACA,eADA;AAEA,0FAFA;AAGA,gBAHA;AAIA,mBAJA;AAKA,oBALA;AAMA;AANA;AAQA,GAbA;AAcA,QAdA,oBAcA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAjCA;;AAkCA;AACA,QADA,gBACA,OADA,EACA;AAAA;AAAA;AAAA;;AACA;AACA,KAHA;AAIA,UAJA,kBAIA,OAJA,EAIA;AAAA;AAAA;AAAA;;AACA;AACA,KANA;AAOA,kBAPA,0BAOA,MAPA,EAOA;AAAA;AAAA;AAAA;;AACA;;AAEA;AACA;AACA,oBADA;AAEA;AAFA;AAIA,KAfA;AAgBA,eAhBA,yBAgBA;AAAA;;AACA;;AAEA,MAAM,2DAAQ,CAAd,cACA,aADA,EAEA;AACA;AACA;AACA;AACA;AACA,wFADA;AAEA,2BAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA,OAhBA,EAiBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,OA3BA;AA6BA,KAhDA;AAiDA,aAjDA,uBAiDA;AAAA;;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gDAfA,CAeA;;AAEA;AACA,MAAM,2DAAQ,CAAd,YACA,aADA,EAEA,yJAFA,EAGA,EAHA,EAIA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,OAdA,EAeA;AACA;AACA;;AAEA;AACA,OApBA;AAqBA,KAxFA;AAyFA,0BAzFA,kCAyFA,KAzFA,EAyFA;AACA;AACA;AACA;AACA;AACA,KA9FA;AA+FA,sBA/FA,8BA+FA,OA/FA,EA+FA;AACA;AACA;AACA,yBACA;AAAA;AAAA,QADA,EAEA,CAFA;AAIA;AAtGA;;AAlCA,G;;;;;;;ACrCA,yC;;;;;;;ACAA,yC;;;;;;;ACAA,yC;;;;;;;ACAA,yC;;;;;;;;ACAA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,iBAAiB;AACF,kEAAS;AACxB,IAAI,KAAU;AACd;AACA;AACA;AACA;AACA,C;;;;;;;;AC3CA;AAAA;AAAA;AACA;AACA;AACA,EAAE,mBAAO,CAAC,GAAiiB;AAC3iB,EAAE,mBAAO,CAAC,GAAyd;AACne,EAAE,mBAAO,CAAC,GAAge;AAC1e,EAAE,mBAAO,CAAC,GAAwd;AACle;AACA,yBAAyB,mBAAO,CAAC,CAAmF;AACpH;AACgJ;AAChJ;AACkX;AAClX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,uJAAc;AAChB,EAAE,yTAAgB;AAClB;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,IAAI,KAAU,GAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAEc,0EAAiB","file":"static/js/pages/guide_main/main.js","sourcesContent":["import Vue from 'vue'\r\nimport App from './index'\r\n\r\nconst app = new Vue(App)\r\napp.$mount()\r\n\r\nexport default {\r\n    config: {\r\n        navigationBarTitleText: '邀请查看',\r\n        navigationBarTextStyle: 'white',\r\n        navigationBarBackgroundColor: '#42b970',\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/guide_main/main.js","<template>\r\n  <div>\r\n    <div id=\"head\" class=\"d-head\">\r\n      <div>\r\n        <span>欢迎&emsp;</span>\r\n        <span\r\n          class=\"underline_span\"\r\n          @click=\"handleGuideNameClicked\">\r\n          {{ guide.realName }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <div id=\"body\">\r\n      <order-list-guide\r\n        :type=\"guideType\"\r\n        :loading=\"loading\"\r\n        :hasMore=\"hasMore\"\r\n        :orders=\"orders\"\r\n        @on-accept=\"handleOrderChanged\"\r\n        @on-cancel=\"handleOrderChanged\"\r\n        @on-reject=\"handleOrderChanged\"/>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport OrderListGuide from \"../../components/order/OrderList\"\r\n\r\nimport guideApi from '../../api/guide'\r\n\r\nimport { GUIDE_ID, GUIDE_INFO } from '../../api/const/guideConst';\r\nimport { STATES_ARRAY, WAITING_STATE } from '../../api/const/guideConst';\r\nimport { GUIDE_TYPE } from '../../api/const/orderConst';\r\nimport { mockGuide } from '../../api/mock/guide_mock_data';\r\nimport { GUIDE_CENTER, ROLE_SELECT, GUIDE_SIGN_UP } from '../pages_url';\r\n\r\nexport default {\r\n  components: {\r\n    OrderListGuide,\r\n  },\r\n  data() {\r\n    return {\r\n      guide: {},\r\n      guideType: GUIDE_TYPE,\r\n      orders: [],\r\n      hasMore: true,\r\n      loading: false,\r\n      pageName: 'guide_main'\r\n    }\r\n  },\r\n  onShow() {\r\n    this.hasMore = true\r\n    this.loading = true\r\n\r\n    // 取得 向导ID\r\n    this.guide.id = wx.getStorageSync(GUIDE_ID);\r\n    if (!this.guide.id) {\r\n      const errMsg = \"向导ID获取失败\";\r\n\r\n      const url = `/${ROLE_SELECT}`;\r\n      this.dLog('跳转', url);\r\n      wx.redirectTo({ url });\r\n\r\n      this.showErrorRoast(errMsg);\r\n      return;\r\n    }\r\n\r\n    // 取得向导信息\r\n    this.getUserInfo();\r\n  },\r\n  methods: {\r\n    dLog(message, ...optionalParams) {\r\n        console.log(this.pageName, message, optionalParams);\r\n    },\r\n    dError(message, ...optionalParams) {\r\n        console.error(this.pageName, message, optionalParams);\r\n    },\r\n    showErrorRoast(errMsg, ...fai) {\r\n      this.dError(errMsg, fai);\r\n\r\n      // 输出提示信息\r\n      wx.showToast({\r\n          icon: 'none',\r\n          title: errMsg\r\n      });\r\n    },\r\n    getUserInfo() {\r\n      this.dLog('getUserInfo 方法响应');\r\n\r\n      guideApi.queryUserInfo(\r\n        this.guide.id,\r\n        (res) => {\r\n          this.dLog(\"取得向导信息成功\", res)\r\n          this.guide = res;\r\n          // 存储向导信息\r\n          wx.setStorage({\r\n            key: GUIDE_INFO,\r\n            data: this.guide,\r\n            success: (suc) => {\r\n              // 存储向导信息成功\r\n              this.dLog(\"存储向导信息成功\", suc)\r\n              this.loading = false\r\n              this.getOrders()\r\n            }\r\n          })\r\n        },\r\n        (rej) => {\r\n          const errMsg = \"粗错啦QWQ没有找到你的向导信息\\n请重新注册\";\r\n          this.loading = false\r\n          \r\n          const url = `/${GUIDE_SIGN_UP}`;\r\n          this.dLog('跳转', url);\r\n          wx.redirectTo({ url });\r\n\r\n          this.showErrorRoast(errMsg, rej);\r\n          return;\r\n        }\r\n      )\r\n    },\r\n    getOrders() {\r\n      this.dLog('getOrders 方法响应');\r\n\r\n      if (this.loading){\r\n        this.dLog(\"加载中 return\");\r\n        return;\r\n      }\r\n      if (!this.hasMore) {\r\n        this.dLog(\"已经加载全部 return\");\r\n        return;\r\n      }\r\n\r\n      // 改为正在loading\r\n      this.loading = false\r\n      \r\n      this.orders.splice(0, this.orders.length);// 清空原 orders 数组\r\n\r\n      // 取得等待中的邀请\r\n      guideApi.queryOrders(\r\n        this.guide.id,\r\n        STATES_ARRAY[WAITING_STATE],\r\n        -1,\r\n        (res) => {\r\n          this.dLog('取得等待中的邀请完成', res)\r\n\r\n          this.hasMore = res.hasMore\r\n\r\n          for (let key in res.orderList) {\r\n            this.orders.push(res.orderList[key])\r\n          }\r\n\r\n          this.loading = false\r\n        },\r\n        (err) => {\r\n          const errMsg = '粗错啦QWQ没找到你的邀请'\r\n          this.showErrorRoast(errMsg, err);\r\n\r\n          this.loading = false\r\n        })\r\n    },\r\n    handleGuideNameClicked(event) {\r\n      this.dLog('跳转到向导的个人中心');\r\n      const url = `/${GUIDE_CENTER}`;\r\n      this.dLog('跳转', url);\r\n      wx.switchTab({ url });\r\n    },\r\n    handleOrderChanged (orderId) {\r\n      this.dLog('一个邀请需要被删除，orderId为', orderId)\r\n      // 去掉这一个\r\n      this.orders.splice(\r\n        this.orders.findIndex(item => item.id === orderId),\r\n        1\r\n      )\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n#head {\r\n  color: white;\r\n  z-index: 100;\r\n}\r\n\r\n.underline_span {\r\n  text-decoration: underline;\r\n}\r\n\r\n</style>\r\n\r\n<style scoped src=\"../../assets/style/d-head.css\" />\r\n<style scoped src=\"../../assets/style/d-search-list.css\" />\r\n<style scoped src=\"../../assets/style/d-btn.css\"/>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/guide_main/index.vue?6de90a67","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.1.2@vue-style-loader!./~/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./~/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-68e9d96f\",\"scoped\":false,\"hasInlineConfig\":false}!./~/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./~/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./~/_mpvue-loader@1.0.13@mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/guide_main/index.vue\n// module id = 190\n// module chunks = 9","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.1.2@vue-style-loader!./~/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./~/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-68e9d96f\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./~/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./src/assets/style/d-btn.css\n// module id = 191\n// module chunks = 9","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.1.2@vue-style-loader!./~/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./~/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-68e9d96f\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./~/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./src/assets/style/d-head.css\n// module id = 192\n// module chunks = 9","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/_vue-style-loader@3.1.2@vue-style-loader!./~/_css-loader@0.28.11@css-loader?{\"minimize\":false,\"sourceMap\":false}!./~/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-68e9d96f\",\"scoped\":true,\"hasInlineConfig\":false}!./~/_px2rpx-loader@0.1.10@px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./~/_postcss-loader@2.1.6@postcss-loader/lib?{\"sourceMap\":true}!./src/assets/style/d-search-list.css\n// module id = 193\n// module chunks = 9","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('div', {\n    staticClass: \"d-head\",\n    attrs: {\n      \"id\": \"head\"\n    }\n  }, [_c('div', [_c('span', [_vm._v(\"欢迎 \")]), _vm._v(\" \"), _c('span', {\n    staticClass: \"underline_span\",\n    attrs: {\n      \"eventid\": '0'\n    },\n    on: {\n      \"click\": _vm.handleGuideNameClicked\n    }\n  }, [_vm._v(\"\\n        \" + _vm._s(_vm.guide.realName) + \"\\n      \")])])]), _vm._v(\" \"), _c('div', {\n    attrs: {\n      \"id\": \"body\"\n    }\n  }, [_c('order-list-guide', {\n    attrs: {\n      \"type\": _vm.guideType,\n      \"loading\": _vm.loading,\n      \"hasMore\": _vm.hasMore,\n      \"orders\": _vm.orders,\n      \"eventid\": '1',\n      \"mpcomid\": '0'\n    },\n    on: {\n      \"on-accept\": _vm.handleOrderChanged,\n      \"on-cancel\": _vm.handleOrderChanged,\n      \"on-reject\": _vm.handleOrderChanged\n    }\n  })], 1)])\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-loader/node_modules/vue-hot-reload-api\").rerender(\"data-v-68e9d96f\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/_mpvue-loader@1.0.13@mpvue-loader/lib/template-compiler?{\"id\":\"data-v-68e9d96f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/_mpvue-loader@1.0.13@mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/guide_main/index.vue\n// module id = 262\n// module chunks = 9","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68e9d96f\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68e9d96f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../assets/style/d-head.css\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68e9d96f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../assets/style/d-search-list.css\")\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-68e9d96f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../../assets/style/d-btn.css\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-68e9d96f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/_mpvue-loader@1.0.13@mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-68e9d96f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\pages\\\\guide_main\\\\index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-loader/node_modules/vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-68e9d96f\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-68e9d96f\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/guide_main/index.vue\n// module id = 74\n// module chunks = 9"],"sourceRoot":""}