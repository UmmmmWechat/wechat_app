### 数据结构

* guide

  * ```javascript
    {
        id: String
        openId: String
        avatar: String,
        realName: String,
        idCard: String,
        gender: ['男'，'女'],
        location: {
                province: String
                city: String
                region: String
        },
        wechat: String,
        phone: String,
        goodFeedbackRate: int
        introduction: String,
        numOfFinishedOrder: int,
        favorSpots: List
    }
    ```

    ​

* tourist

  * ```javascript
    {
        id: String
        openId: String // 微信服务器给的唯一用户标识
        avatar: String,
        name: String,
        gender: ['男', '女'],
        finishedOrders: List,
        ongoingOrders: List,
        waitingOrders: List
        invalidOrders: List
        
    }
    ```

    ​

* order

  * ```javascript
    {
        id: String,
        touristId: String,
        guideId: String,
        spotId: String
        generatedDate: Date
        travelDate: Date
        message: String // 邀请留言，比如我器大活好
        state: ['finished', 'waiting', 'ongoing', 'invalid', 'rejected', 'canceled', 'timeout']
        cancelReason: String
        feedback: {
            spotPoint: int
            guidePoint: int
            comment: String // 对这一炮的评价
        }
    }
    ```

* spot

  * ```javascript
    {
        id: String
        name: String
        location: {
                province: String
                city: String
                region: String
        },
        pictureUrl: String
        introduction: Stirng
        recommendLevel: int
        guides: List
    }
    ```

    ​



### 接口

* tourist

  * ```javascript
    export default {
        /**
         * 根据定位查询景点
         * @param {} location 
         * @param {int} lastIndex
         * @param {*} resolve 
         * @param {*} reject 
         */
        querySpots (location, lastIndex ,resolve, reject) {
            console.log(location);
            var result = JSON.parse(json);
            resolve(result);
        },

        /**
         * 根据景点查询向导
         * @param {String} spotId 景点ID
         * @param {*} resolve 
         * @param {*} reject 
         */
        queryGuideBySpot (spotId, lastIndex ,resolve, reject) {
            console.log('in tourist api:' + spot);
            var res = []
            for (let i = 0; i < 10; i++){
                res.push(mockGuide(i));
            }
            resolve(res);
        },

        /**
         * 
         * @param {*} keyword 
         * @param {*} resolve 
         * @param {*} reject 
         */
        queryGuideByKeyword (keyword, resolve, reject) {

        },


        /**
         * 邀请 guide
         * @param {String} guideId 
         * @param {String} spotId 
         * @param {String} touristId 
         * @param {Function} resolve 
         * @param {Function} reject
         * {
         *  orderId
         * }
         */
        inviteGuide (guideId, spotId, touristId, resolve, reject) {

        },

        /**
         * 
         * @param {*} code 
         * @param {*} resolve 
         * @param {*} reject 
         * {
         *  touristId
         * }
         */
        logIn (code, resolve, reject) {
            //
        },

        /**
         * 
         * @param {String} touristId 
         * @param {String} state
         * @param {Function} resolve 
         * @param {Function} reject 
         */
        queryOrders (touristId, state, lastIndex, resolve, reject) {

        },

        /**
         * 取消一单
         * @param {*} orderId 
         * @param {*} resolve 
         * @param {*} reject 
         */
        cancelOrders (orderId, resolve, reject) {

        },


        /**
         * 评价一单
         * @param {*} orderId 
         * @param {*} feedback 
         * @param {*} resolve 
         * @param {*} reject
         * feedback: {
            spotPoint: int
            guidePoint: int
            comment: String
            } 
         */
        commendOrder (orderId, feedback, resolve, reject) {

        },

         /**
         * 
         * @param {*} keyword 
         * @param {*} resolve 
         * @param {*} reject 
         */
        queryOrdersByKeyword (keyword, userId ,resolve, reject) {
            
        }
    }
    ```

* guide

  * ```javascript
    export default {
        /**
         * 查询是否是新的guide
         * @param {string} id 
         * @param {Function} resolve 
         * @param {Function} reject 
         */
        queryIfNew (code, resolve, reject) {
            resolve(true);
        },

        /**
         * 
         * @param {Object} form 
         * @param {*} resolve 
         * @param {*} reject 
         * form: {
            realName: '',
            idCard: '',
            gender: '',
            location: {},
            wechat: '',
            phone: ''
          }
         */
        signUp (form, resolve, reject) {
            resolve('success');
        },



        /**
         * 
         * @param {*} guideId 
         * @param {*} state 
         * @param {*} resolve 
         * @param {*} reject 
         */
        queryOrders (guideId, state, lastIndex, resolve, reject) {

        },

        /**
         * 通过一个受邀
         * @param {*} orderId 
         * @param {*} resolve 
         * @param {*} reject 
         * 
         */
        acceptOrder (orderId, resolve, reject) {

        },

        /**
         * 
         * @param {*} orderId 
         * @param {*} resolve 
         * @param {*} reject 
         */
        rejectOrder (orderId, resolve, reject) {

        },

        /**
         * 
         * @param {Object} info 
         * @param {*} resolve 
         * @param {*} reject 
         */
        modifyUserInfo (info, resolve, reject) {

        },

        /**
         * 
         * @param {*} id 
         * @param {*} resolve 
         * @param {*} reject 
         */
        queryUserInfo (id, resolve, reject) {

        },

        /**
         * 
         * @param {*} keyword 
         * @param {*} resolve 
         * @param {*} reject 
         * {
         *  "waiting":[{},{},{}],
         *  "ongoing":[{},{},{}],
         *  []
         * }
         */
        queryOrdersByKeyword (keyword, userId ,resolve, reject) {
            
        }
    }
    ```

* spot

  * ```javascript
    export default {
        /**
         * 
         * @param {*} keyword
         * @param {int} keyword 
         * @param {*} resolve 
         * @param {*} reject 
         */
        querySpotsByKeyword (keyword, lastIndex, resolve, reject) {

        },
    }
    ```

    ​

### 分工

* 前端
  * 已写
    * 角色选择界面
    * guide注册（完善信息）界面
    * tourist主界面 （显示景点）
    * 显示某一景点下的 guide
  * 未写
    * tourist 发送邀请的填写界面
    * tourist查看订单的界面 [ 'waiting', 'ongoing',... ]
    * tourist评价订单的界面
    * 取消订单填写理由的界面
    * 我的游记（已经完成）
    * guide查看订单界面
    * guide查看个人信息
    * guide修改个人信息
    * guide日程表